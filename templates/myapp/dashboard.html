{% load static %}
<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>Dashboard - Rakuten Value Points</title>
		<link rel="stylesheet" href="{% static 'css/landing.css' %}" />
	</head>
	<body>
		<div class="dash-page">
			<!-- Top bar -->
			<header class="dash-header">
				<div class="dash-header-left">
					<img src="{% static 'img/logo.png' %}" alt="Rakuten Value Points" class="dash-logo" />
					<span class="dash-title-text">Rakuten Value Points</span>
				</div>

				<div class="dash-header-right">
					<span class="dash-username-label">User:</span>
					<span class="dash-username">{{ user.username }}</span>

					<form
						method="post"
						action="{% url 'myapp:logout' %}"
						style="display: inline; margin-left: 16px"
					>
						{% csrf_token %}
						<button type="submit" class="dash-logout-button">Log out</button>
					</form>
				</div>
			</header>

			<!-- Main content: tasks table + current score -->
			<main class="dash-main">
				<section class="dash-tasks-card">
					<h2 class="dash-section-title">Task TODO</h2>

					<table class="dash-table">
						<thead>
							<tr>
								<th>Task TODO</th>
								<th>Description</th>
								<th>Reward</th>
								<th>Completed</th>
							</tr>
						</thead>
						<tbody>
							<!-- Row 1: Ichiba -->
							<tr>
								<td>
									<a href="{% url 'myapp:ichiba_search' %}" class="task-link">
										Ichiba Item Search
									</a>
								</td>
								<td>Search for items</td>
								<td class="center-cell">{{ mission_rewards.ichiba }} pt</td>
								<td class="center-cell completed-cell">
									<input
										type="checkbox"
										disabled
										{% if mission_status.ichiba %}checked{% endif %}
									/>
								</td>
							</tr>

							<!-- Row 2: Hotels -->
							<tr>
								<td>
									<a href="{% url 'myapp:hotel_ranking' %}" class="task-link"> Hotel Ranking </a>
								</td>
								<td>View top-ranked hotels</td>
								<td class="center-cell">{{ mission_rewards.hotel }} pt</td>
								<td class="center-cell completed-cell">
									<input type="checkbox" disabled {% if mission_status.hotel %}checked{% endif %} />
								</td>
							</tr>

							<!-- Row 3: Games -->
							<tr>
								<td>
									<a href="{% url 'myapp:games_search' %}" class="task-link">
										Rakuten Game Search
									</a>
								</td>
								<td>Search for games</td>
								<td class="center-cell">{{ mission_rewards.games }} pt</td>
								<td class="center-cell completed-cell">
									<input type="checkbox" disabled {% if mission_status.games %}checked{% endif %} />
								</td>
							</tr>
						</tbody>
					</table>
				</section>

				<!-- Current score card -->
				<aside class="dash-score-card">
					<h3 class="dash-section-title">Current Score</h3>
					<div class="star-wrapper">
						<svg class="star-icon" viewBox="0 0 100 100" aria-hidden="true">
							<polygon points="50,5 61,38 95,38 67,58 78,91 50,72 22,91 33,58 5,38 39,38" />
						</svg>
						<span class="star-score">{{ user_points }}</span>
					</div>
				</aside>
			</main>

			<section class="dash-footer">
				<h3 class="dash-footer-title">Today's Tasks</h3>
				<p class="dash-footer-text">
					+{{ DAILY_MISSION_BONUS|default:1 }} points for completing all daily tasks
					({{completed_mission_num }}/{{ total_missions }})
				</p>
			</section>
		</div>
	</body>
</html>
